<html>
  <head>
    <title>static</title>
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>

    <!-- <script src="https://unpkg.com/networked-aframe/dist/networked-aframe.min.js"></script>] -->
    <!-- patched for naf-template ↓-->
    <script src="/js/build.js"></script>
    <style>
      .overlayStyle {
        position: absolute;
        top: 0px;
        z-index: 1;
      }
    </style>
  </head>

  <body>
    <a-scene
      networked-scene=" app: myApp; room: room1; debug: true;"
      webxr="optionalFeatures: dom-overlay; overlayElement: #overlay"
      vr-mode-ui
    >
      <a-assets>
        <a-asset-item
          id="floor"
          src="/low_poly_isometric_rooms/scene.gltf"
        ></a-asset-item>
        <!--naf-tepmpkate内に空白がいっこでも混じると処理に失敗する(ロジックの調整が必要)-->
        <naf-template id="avatar-template"
          ><a-entity class="avatar"
            ><a-sphere
              class="head"
              color="#ffffff"
              scale="0.45 0.5 0.4"
            ></a-sphere
            ><a-entity class="face" position="0 0.05 0"
              ><a-sphere
                class="eye"
                color="#efefef"
                position="0.16 0.1 -0.35"
                scale="0.12 0.12 0.12"
                ><a-sphere
                  class="pupil"
                  color="#000"
                  position="0 0 -1"
                  scale="0.2 0.2 0.2"
                ></a-sphere></a-sphere
              ><a-sphere
                class="eye"
                color="#efefef"
                position="-0.16 0.1 -0.35"
                scale="0.12 0.12 0.12"
                ><a-sphere
                  class="pupil"
                  color="#000"
                  position="0 0 -1"
                  scale="0.2 0.2 0.2"
                ></a-sphere></a-sphere></a-entity></a-entity
        ></naf-template>
      </a-assets>

      <a-gltf-model
        position="0 0 -3.0"
        scale="2 1 2"
        src="#floor"
      ></a-gltf-model>
      <a-text
        position="-1 1.25 -3"
        value="Hello, World!"
        color="green"
      ></a-text>

      <a-entity
        id="player"
        position="0 1.3 0 "
        networked="template:#avatar-template; attachTemplateToLocal:false;"
        camera
        wasd-controls
        look-controls
      >
      </a-entity>

      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
  </body>
</html>
